(this["webpackJsonpworkout-app-react"]=this["webpackJsonpworkout-app-react"]||[]).push([[0],{39:function(e,t,a){e.exports=a(87)},44:function(e,t,a){},46:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(19),i=a.n(c),l=(a(44),a(45),a(46),a(8)),o=a(15),s=a.n(o),u=a(33),m=a.n(u),d=a(6),f=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1];console.log("Login");var i={signInFlow:"popup",signInOptions:[s.a.auth.GoogleAuthProvider.PROVIDER_ID,s.a.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccess:function(){return c(!0),!1}}};return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(d.a,{to:"/home"}):r.a.createElement(m.a,{uiConfig:i,firebaseAuth:s.a.auth()}))},p=(a(68),function(){return console.log("LoadingIndicator"),r.a.createElement("div",{className:"root"},r.a.createElement("div",{className:"root__div"}))}),g=(a(69),a(70),a(10)),E=(a(71),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navigation"},r.a.createElement("ul",{className:"navigation__ul"},r.a.createElement("li",{className:"navigation__li"},r.a.createElement(g.b,{to:"/trainings",className:"navigation__a"},"Treningi")),r.a.createElement("li",{className:"navigation__li"},r.a.createElement(g.b,{to:"/statistics",className:"navigation__a"},"Statystyki")),r.a.createElement("li",{className:"navigation__li"},r.a.createElement(g.b,{to:"/measurement",className:"navigation__a"},"Pomiary")))))}),b=function(){var e=Object(n.useContext)(F).currentUser;Object(n.useEffect)((function(){}),[]);return r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__logo"},r.a.createElement(g.b,{to:"/",className:"header__link"},"TO DO WORKOUT")),e?r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null),r.a.createElement("button",{className:"header__link",onClick:function(){s.a.auth().signOut().then((function(){}),(function(e){}))}},"Wyloguj si\u0119")):r.a.createElement(g.b,{className:"header__link",to:"/login"},"Zaloguj si\u0119"))},v=a(38),h=function(e){var t=e.component,a=Object(v.a)(e,["component"]),c=Object(n.useContext)(F).currentUser;return r.a.createElement(d.b,Object.assign({},a,{render:function(e){return c?r.a.createElement(t,e):r.a.createElement(d.a,{to:"/"})}}))},x=a(21),N=(a(72),function(e){var t=e.formFields,a=t.fields,n=t.button,c=e.handleSubmit;return r.a.createElement(x.b,{onSubmit:c},(function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit,className:"form"},a.map((function(e){return r.a.createElement(x.a,{key:e.name,name:e.name,validate:e.validate,defaultValue:e.initialValue,parse:e.parse},(function(t){var a=t.input,n=t.meta;return r.a.createElement("div",{className:"form__wrapper"},r.a.createElement("label",null,e.text),"textarea"===e.component?r.a.createElement("textarea",Object.assign({className:"form__textarea"},a,{type:"text",placeholder:"Description"})):r.a.createElement("input",Object.assign({className:"form__input"},a,{type:e.type?e.type:"text",step:e.step?e.step:void 0,min:e.min?e.min:void 0,placeholder:e.placeholder})),n.error&&n.touched&&r.a.createElement("span",{className:"form__span"},n.error))}))})),r.a.createElement("button",{variant:n.variant,type:n.type,className:"form__button"},n.text))}))}),_=(a(73),function(e){var t=e.onClick,a=e.children;return r.a.createElement("button",{onClick:t,className:"button"},a)}),w=(a(74),a(35)),j=function(){var e=Object(d.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"arrow__span",onClick:function(){e.goBack()}},r.a.createElement(w.a,null)))},k=a(36),O=s.a.initializeApp({apiKey:"AIzaSyAkx7U5xHRytqTxEvWcAeBafAnn0RxvCGE",authDomain:"workout-app-react.firebaseapp.com",databaseURL:"https://workout-app-react.firebaseio.com",projectId:"workout-app-react",storageBucket:"workout-app-react.appspot.com",messagingSenderId:"525427559623",appId:"1:525427559623:web:086662897279ef7ca942e2",measurementId:"G-LRVXXWQ6R2"}),y=function(e){return function(t){return t?void 0:e}},S=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduce((function(t,a){return t||a(e)}),void 0)}},C=(a(75),function(e){var t=e.labelText,a=e.editDate,c=e.refUrl,i=e.isActiveEditing,o=e.setIsActiveEditing,s=Object(n.useState)(),u=Object(l.a)(s,2),m=u[0],d=u[1],f=Object(n.useState)(),p=Object(l.a)(f,2),g=p[0],E=p[1],b=Object(n.useState)(!1),v=Object(l.a)(b,2),h=v[0],x=v[1],_={fields:[{name:"workoutName",validate:S(y("To pole jest wymagane!")),initialValue:m,text:t,placeholder:"Nazwa treningu",type:"text"}],button:{type:"submit",text:"Potwierd\u017a zmiany"}};a&&_.fields.unshift({name:"date",validate:S(y("To pole jest wymagane!")),initialValue:g,text:t,placeholder:"Data treningu",type:"datetime-local"});var w=function(){x(!h),o(!i)},j=function(e){d(e.val().workoutName),E(e.val().date)};return Object(n.useEffect)((function(){var e=O.database().ref(c);return e.once("value").then(j),function(){e.off("value",j)}}),[c]),r.a.createElement(r.a.Fragment,null,h?r.a.createElement(N,{formFields:_,handleSubmit:function(e){!function(e,t){t?O.database().ref(c).update({workoutName:e,date:t}):O.database().ref(c).update({workoutName:e})}(e.workoutName,e.date),d(e.workoutName),a&&E(e.date),w()}}):r.a.createElement("div",{className:"edit-title__div"},r.a.createElement("h2",{className:"edit-title__h2"},m),r.a.createElement(k.a,{onClick:w,className:"edit-title__icon-edit"})))}),z=(a(76),function(e){var t=e.handleEdit;return r.a.createElement("div",{className:"go-back-delete"},r.a.createElement(j,null),r.a.createElement(_,{onClick:t},"Usu\u0144 trening"))}),F=Object(n.createContext)({}),D=function(e){var t=e.children,a=e.fire,c=Object(n.useState)(null),i=Object(l.a)(c,2),o=i[0],s=i[1],u=Object(n.useState)(!0),m=Object(l.a)(u,2),d=m[0],f=m[1];return Object(n.useEffect)((function(){a.auth().onAuthStateChanged((function(e){(s(e),f(!1),e)&&a.database().ref("users/").child(e.uid).once("value",(function(t){var n,r;null!==t.val()||(n=e.uid,r=e.email,a.database().ref("users/"+n).set({email:r}))}))}))}),[a]),d?r.a.createElement(p,null):r.a.createElement(F.Provider,{value:{currentUser:o}},t)},T=function(){var e=Object(n.useContext)(F).currentUser;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement("div",null,"Witaj zalogowany"):r.a.createElement("div",null,"Zaloguj si\u0119"))},A=function(){var e=Object(n.useContext)(F).currentUser;return console.log("currentUser w HOME:",e),r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,"Ostatnie treningi",r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null)))},I=(a(77),function(e){var t=e.trainings,a=Object(d.g)();return r.a.createElement("div",{className:"list"},r.a.createElement("h2",{className:"list__h2"},"Ostatnie treningi"),r.a.createElement("ul",{className:"list__ul"},t&&t.map((function(e){var t=e.date.replace(/T/g," ");return r.a.createElement("li",{onClick:function(){return function(e){a.push("/trainings/".concat(e.id))}(e)},key:e.id,className:"list__li"},r.a.createElement("p",{className:"list__p"},e.workoutName),r.a.createElement("p",{className:"list__p"},t))})).reverse()))}),U=function(){var e=Object(d.g)(),t=Object(n.useContext)(F).currentUser,a=Object(n.useState)(),c=Object(l.a)(a,2),i=c[0],o=c[1],s=new Date,u="".concat(s.getFullYear(),"-").concat(s.getMonth()+1,"-").concat(s.getDate()>9?s.getDate():"0"+s.getDate(),"T").concat(s.getHours()>9?s.getHours():"0"+s.getHours(),":").concat(s.getMinutes()>9?s.getMinutes():"0"+s.getMinutes()),m={fields:[{name:"date",validate:S(y("To pole jest wymagane!")),initialValue:u,text:"Data treningu",placeholder:"Data treningu",type:"datetime-local"},{name:"workoutName",validate:S(y("To pole jest wymagane!")),initialValue:void 0,text:"Nazwa treningu",placeholder:"Nazwa treningu"}],button:{type:"submit",text:"Dodaj trening"}},f=function(e){var t=[];e.forEach((function(e){var a=e.val();t.push(a)})),o(t)};return Object(n.useEffect)((function(){if(t){var e=O.database().ref("users/"+t.uid+"/trainings").orderByChild("date");return e.on("value",f),function(){e.off("value",f)}}}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{formFields:m,handleSubmit:function(a){var n=a.date.replace(/-/g,"").replace(/T/g,"").replace(/:/g,"");t&&(!function(e,t,a,n){O.database().ref("users/"+e+"/trainings/"+t).set({id:t,date:a,workoutName:n})}(t.uid,n,a.date,a.workoutName),e.push("/trainings/".concat(n)))}}),i&&r.a.createElement(I,{trainings:i}))},R=(a(78),function(e){var t=e.exercises,a=e.id,n=Object(d.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"training-exercise-list__ul"},t.map((function(e){return r.a.createElement("li",{onClick:function(){return function(e,t){n.push({pathname:"/trainings/".concat(a,"/").concat(e),state:{exerciseName:t}})}(e.key,e.workoutName)},key:e.key,className:"training-exercise-list__exercise"},e.workoutName)}))))}),V=a(25),M=(a(79),function(e){var t=e.exercises,a=(e.id,e.refUrl),c=Object(n.useState)(t.map((function(e,t){return{id:"".concat(t+1),content:e.workoutName,key:e.key}}))),i=Object(l.a)(c,2),o=i[0],s=i[1];return r.a.createElement(V.a,{onDragEnd:function(e){if(e.destination){var t=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),c=Object(l.a)(r,1)[0];return n.splice(a,0,c),n}(o,e.source.index,e.destination.index);s(t),O.database().ref(a).set({}),t.forEach((function(e){O.database().ref(a).push().set({workoutName:e.content})})),console.log("items",t)}}},r.a.createElement(V.c,{droppableId:"droppable"},(function(e,t){return r.a.createElement("div",Object.assign({className:"list"},e.droppableProps,{ref:e.innerRef}),o.map((function(e,t){return r.a.createElement(V.b,{key:e.id,draggableId:e.id,index:t},(function(t,a){return r.a.createElement("div",Object.assign({className:"list__item",ref:t.innerRef},t.draggableProps,t.dragHandleProps),e.content)}))})),e.placeholder)})))}),P=(a(81),function(e){var t=e.match,a=Object(d.g)(),c=t.params.id,i=Object(n.useContext)(F).currentUser,o=Object(n.useState)(!1),s=Object(l.a)(o,2),u=s[0],m=s[1],f={fields:[{name:"workoutName",validate:S(y("To pole jest wymagane!")),initialValue:void 0,text:"Nowe \u0107wiczenie",placeholder:"Nowe \u0107wiczenie"}],button:{type:"submit",text:"Dodaj \u0107wiczenie"}},p=Object(n.useState)(),g=Object(l.a)(p,2),E=g[0],b=g[1],v=function(e){var t=[];e.forEach((function(e){var a=e.val().workoutName,n=e.key;t.push({workoutName:a,key:n})})),b(t)};return Object(n.useEffect)((function(){if(i){var e=O.database().ref("users/".concat(i.uid,"/trainings/").concat(c));return e.child("exercises").on("value",v),function(){e.child("exercises").off("value",v)}}}),[i,c]),r.a.createElement("div",{className:"training"},!u&&r.a.createElement(z,{handleEdit:function(){i&&(O.database().ref("users/".concat(i.uid,"/trainings/").concat(c)).remove(),a.goBack())}}),i&&r.a.createElement(C,{labelText:"Nazwa treningu",editDate:!0,refUrl:"users/".concat(i.uid,"/trainings/").concat(c),isActiveEditing:u,setIsActiveEditing:m}),u&&E&&i?r.a.createElement(M,{exercises:E,id:c,refUrl:"users/".concat(i.uid,"/trainings/").concat(c,"/exercises")}):r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{formFields:f,handleSubmit:function(e){i&&(O.database().ref("users/".concat(i.uid,"/trainings/").concat(c)).child("exercises").push().set({workoutName:e.workoutName}),e.workoutName="")}}),E&&r.a.createElement(R,{exercises:E,id:c})))}),W=(a(82),a(83),function(e){var t=e.handleAddSeries;return r.a.createElement("div",{onClick:t,className:"exercise__line"},r.a.createElement("div",{className:"exercise__check"},"+"))}),L=(a(84),function(e){var t=e.index,a=e.handleRemoveSeries;return r.a.createElement("div",{className:"remove-series"},r.a.createElement("button",{onClick:function(){return a(t)},type:"button",className:"remove-series__button"},"Usu\u0144 seri\u0119"))}),B=(a(85),function(e){var t=e.index;return r.a.createElement(r.a.Fragment,null,t%2===0&&r.a.createElement("p",{className:"seriesNumber"},"Seria ",t/2+1))}),H=function(e){var t=e.formFields,a=t.fields,n=t.button,c=e.handleSubmit,i=e.setFormFields,l=function(){a.push({name:"exerciseWeight".concat(o()),validate:S(y("To pole jest wymagane!")),initialValue:void 0,text:"Ci\u0119\u017car (kg)",placeholder:"Ci\u0119\u017car (kg)"},{name:"exerciseRepeat".concat(o()),validate:S(y("To pole jest wymagane!")),initialValue:void 0,text:"Liczba powt\xf3rze\u0144",placeholder:"Liczba powt\xf3rze\u0144"}),i({fields:a,button:n})},o=function(){return Math.random().toString(36).substr(2,9)+Math.random().toString(36).substr(2,9)},s=function(e){a.splice(e-1,2),i({fields:a,button:n})};return r.a.createElement(x.b,{onSubmit:c},(function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit,className:"form"},a.map((function(e,t){return r.a.createElement(x.a,{key:e.name,name:e.name,validate:e.validate,defaultValue:e.initialValue,parse:e.parse},(function(a){var n=a.input,c=a.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{index:t}),r.a.createElement("div",{className:"form__wrapper"},r.a.createElement("label",null,e.text),r.a.createElement("input",Object.assign({className:"form__input"},n,{type:"number",step:"1",min:"0",placeholder:e.placeholder})),c.error&&c.touched&&r.a.createElement("span",{className:"form__span"},c.error)),t%2===1&&r.a.createElement(L,{index:t,handleRemoveSeries:s}))}))})),r.a.createElement(W,{handleAddSeries:l}),r.a.createElement("button",{className:"form__button"},n.text))}))},Z=(a(86),function(e){var t=Object(d.g)(),a=Object(n.useContext)(F).currentUser,c=e.match.url.replace("/trainings/","").replace("/"+e.match.params.id,""),i=Object(n.useState)(!1),o=Object(l.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)({fields:[{name:"exerciseWeight",validate:S(y("To pole jest wymagane!")),initialValue:void 0,text:"Ci\u0119\u017car (kg)",placeholder:"Ci\u0119\u017car (kg)"},{name:"exerciseRepeat",validate:S(y("To pole jest wymagane!")),initialValue:void 0,text:"Liczba powt\xf3rze\u0144",placeholder:"Liczba powt\xf3rze\u0144"}],button:{type:"submit",text:"Zapisz"}}),f=Object(l.a)(m,2),p=f[0],g=f[1];return Object(n.useEffect)((function(){a&&O.database().ref("users/".concat(a.uid,"/trainings/").concat(c,"/exercises/").concat(e.match.params.id,"/series")).on("value",(function(e){if(e){var t=[];e.forEach((function(e){var a=t.length%2===0?"Ci\u0119\u017car":"Liczba powt\xf3rze\u0144";t.push({name:"".concat(t.length%2===0?"exerciseWeight":"exerciseRepeat").concat(Math.random().toString(36).substr(2,9)+Math.random().toString(36).substr(2,9)),validate:S(y("To pole jest wymagane!")),initialValue:e.val(),text:a,placeholder:a})})),t.length>0&&g({fields:t,button:{type:"submit",text:"Zapisz"}})}}))}),[a,c,e.match.params.id]),r.a.createElement("div",{className:"exercise"},!s&&r.a.createElement(z,{handleEdit:function(){a&&(O.database().ref("users/".concat(a.uid,"/trainings/").concat(c,"/exercises/").concat(e.match.params.id)).remove(),t.goBack())}}),a&&r.a.createElement(C,{labelText:"Nazwa \u0107wiczenia",editDate:!1,refUrl:"users/".concat(a.uid,"/trainings/").concat(c,"/exercises/").concat(e.match.params.id),isActiveEditing:s,setIsActiveEditing:u}),!s&&r.a.createElement(H,{formFields:p,setFormFields:g,handleSubmit:function(t){var n=[];if(p.fields.forEach((function(e){n.push(t[e.name])})),a){var r="users/".concat(a.uid,"/trainings/").concat(c,"/exercises/").concat(e.match.params.id);O.database().ref(r).child("series").set(n)}}}))}),G=function(){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(p,null)},r.a.createElement(D,{fire:O},r.a.createElement("div",{className:"app__wrapper"},r.a.createElement(g.a,null,r.a.createElement(b,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/login"},r.a.createElement(f,null)),r.a.createElement(h,{path:"/home",exact:!1,component:A}),r.a.createElement(h,{path:"/trainings",component:U,exact:!0}),r.a.createElement(h,{path:"/trainings/:id",component:P,exact:!0}),r.a.createElement(h,{path:"/trainings/:id/:id",component:Z,exact:!0}),r.a.createElement(h,{path:"/statistics",exact:!1,component:A}),r.a.createElement(h,{path:"/measurement",exact:!1,component:A}),r.a.createElement(d.b,{path:"/",exact:!0},r.a.createElement(T,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.67fbd44b.chunk.js.map